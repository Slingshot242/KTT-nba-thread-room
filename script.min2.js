/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /gh/deafnv/bokitube-server@master/channel/script.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const resizes=document.getElementById("resize-video-smaller"),resizel=document.getElementById("resize-video-larger");resizes.remove(),resizel.remove(),document.querySelector(".container-fluid").style.display="none",$("#motdwrap").prepend($('<div class="banner-slideshow"><div class="mover-1"></div></div>')),$(".credit").append($('<p class="text-muted credit">Theme by TomoLover, available on <a href="https://github.com/deafnv/bokitube-server" target="_blank" rel="noreferrer noopener">Github</a></p>')),$("#mainpage").prepend($('<div id="content-wrap">')),$("#content-wrap").prepend($('<div id="rightcontent">')),$("#content-wrap").prepend($('<div id="leftcontent">')),$("<div id='video-container'>").prependTo($("#leftcontent")),$("#videowrap").prependTo($("#video-container")),$('<div id="channel-content">').appendTo($("#leftcontent")),$("#announcements").appendTo($("#channel-content")),$("#drinkbar").appendTo($("#channel-content")),$("#motdrow").appendTo($("#channel-content")),$("#controlsrow").appendTo($("#channel-content")),$("#playlistrow").appendTo($("#channel-content")),$("#sitefooter").appendTo($("#channel-content")),$("#footer").appendTo($("#channel-content")),$("#leftcontent").prepend($("#pollwrap")),$("#chatheader").appendTo($("#rightcontent")),$("#userlist").appendTo($("#rightcontent")),$("#messagebuffer").appendTo($("#rightcontent"));const formLine=document.querySelector("div#chatwrap > form");formLine.setAttribute("id","formline"),$("#formline").appendTo($("#rightcontent")),$("#leftcontrols").appendTo($("#rightcontent")),$("#rightcontent").prepend($("<div id='currenttitlewrap'>")),$("#videowrap-header").prependTo($("#currenttitlewrap"));const nodecurrenttitle=document.getElementById("currenttitle"),clonecurrenttitle=nodecurrenttitle.cloneNode(!0),pagewrap=document.getElementById("wrap");pagewrap.setAttribute("style","padding-bottom: 0px;");const chatline=document.getElementById("chatline");function chatPosition(e){e.matches?($("#rightcontent").appendTo($("#leftcontent")),$("#channel-content").appendTo($("#leftcontent")),$("#footer").appendTo($("#leftcontent")),document.getElementById("chatline").onclick=function(){var e=0,t=setInterval((()=>{document.documentElement.scrollTop=0,10==++e&&window.clearInterval(t)}),50)},setInterval((function(){document.documentElement.style.setProperty("--vh",window.innerHeight/100+"px")}),20)):($("#rightcontent").appendTo($("#content-wrap")),document.documentElement.style.setProperty("--vh",window.innerHeight/100+"px"))}chatline.removeAttribute("placeholder"),chatline.setAttribute("placeholder","Send a message"),chatline.setAttribute("spellcheck","false"),setInterval((function(){document.documentElement.style.setProperty("--vh",window.innerHeight/100+"px")}),20);var mediaQuery=window.matchMedia("(max-width: 768px)");chatPosition(mediaQuery),mediaQuery.addEventListener("change",chatPosition);const jumpBtn=document.createElement("button");jumpBtn.innerHTML="Scroll to current item",jumpBtn.setAttribute("id","jump-btn"),jumpBtn.setAttribute("class","btn"),jumpBtn.onclick=function(){window.scrollQueue()};const rightControls=document.getElementById("rightcontrols");rightControls.insertBefore(jumpBtn,rightControls.children[1]);var VOL_AFK=!1,FOCUS_AFK=!1;function toggleDiv(e){"none"==$(e).css("display")?$(e).show():$(e).hide()}function insertText(e){$("#chatline").val($("#chatline").val()+e).focus()}setInterval((function(){!1===VOL_AFK&&!1===FOCUS_AFK&&$("#userlist").find("span[class^=userlist]").each((function(){$(this).html()!=CLIENT.name||"italic"!=$(this).css("font-style")||socket.emit("chatMsg",{msg:"/afk"})}))}),500),setInterval((function(){document.hasFocus()&&FOCUS_AFK&&VOL_AFK?(socket.emit("chatMsg",{msg:"/afk"}),FOCUS_AFK=!FOCUS_AFK,VOL_AFK=!VOL_AFK):document.hasFocus()||FOCUS_AFK||VOL_AFK||(socket.emit("chatMsg",{msg:"/afk"}),FOCUS_AFK=!FOCUS_AFK,VOL_AFK=!VOL_AFK)}),500),$(document).ready((function(){"cytu.be"==window.location.host&&($(".navbar-brand").html(KTT NBA Thread),$('<link id="chanfavicon" href="'+faviconUrl+'" type="image/x-icon" rel="shortcut icon" />').appendTo("head")),$('<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu">').appendTo("head"),$('<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Quicksand">').appendTo("head")})),$('<button class="btn btn-primary" id="cs-csspreview">Preview CSS</button>').appendTo("#cs-csseditor").on("mousedown",(function(){document.getElementById("channeloptions").style.visibility="hidden",document.getElementById("cs-csseditor").style.visibility="hidden",document.getElementById("cs-csspreview").style.visibility="visible"})).on("mouseout",(function(){document.getElementById("channeloptions").style.visibility="visible",document.getElementById("cs-csseditor").style.visibility="visible"})).on("mouseup",(function(){document.getElementById("channeloptions").style.visibility="visible",document.getElementById("cs-csseditor").style.visibility="visible"})),$('<button id="afk-btn" class="btn btn-default btn-sm">AFK</button>').appendTo("#leftcontrols").on("click",(function(){socket.emit("chatMsg",{msg:"/afk"}),VOL_AFK=!VOL_AFK})),$('<button id="clear-btn" class="btn btn-default btn-sm">Clear</button>').appendTo("#leftcontrols").on("click",(function(){socket.emit("chatMsg",{msg:"/clear"})})),localStorage.epFlTop&&localStorage.epFlLeft||(localStorage.epFlTop=100,localStorage.epFlLeft=-15),$('<div class="emotewrap" id="emotewrap" style="top: '+localStorage.epFlTop+"px; left: "+localStorage.epFlLeft+'px;">').appendTo($("#rightcontent")),localStorage.epposition||(localStorage.epposition=1,emotespanel=$('<div id="emotespanel" class="ep__fixed" style="display:none" />').insertAfter("#userlist")),0==localStorage.epposition?emotespanel=$('<div id="emotespanel" class="ep__floating" style="display:none" />').appendTo($("#emotewrap")):emotespanel=$('<div id="emotespanel" class="ep__fixed" style="display:none" />').insertAfter("#userlist"),localStorage.epIsOpen||(localStorage.epIsOpen=0),1==localStorage.epIsOpen&&toggleDiv(emotespanel);let observer=new IntersectionObserver(observerCallback);function observerCallback(){toggleDiv("#queue")}var autocompleteArr=[];function emotesPanel(){if(emotespanel.removeClass("row"),document.querySelector("#emotespanel").replaceChildren(),len=CHANNEL.emotes.length,len<1)emotespanel.addClass("row"),makeAlert("No emotes available","Ask channel administrator. This panel will update every second until an emote is found.").appendTo(emotespanel),console.log("No emotes found, reloading in 1 second"),setTimeout((function(){emotesPanel()}),1e3);else{for(i in CHANNEL.emotes)$("<img onclick=\"insertText('"+CHANNEL.emotes[i].name+" ')\" />").attr({src:CHANNEL.emotes[i].image,title:CHANNEL.emotes[i].name}).appendTo(emotespanel),autocompleteArr.push({name:CHANNEL.emotes[i].name,image:CHANNEL.emotes[i].image});autocompleteArr.sort(((e,t)=>e.name.localeCompare(t.name))),window.matchMedia("(max-width: 768px)").matches?observer.observe(document.querySelector("#rightpane-inner").children[5]):autocomplete(document.getElementById("chatline"),autocompleteArr)}}function switchEp(){const e=document.querySelector("#emotespanel");1==localStorage.epposition?(e.setAttribute("class","ep__floating"),$("#emotespanel").appendTo($("#emotewrap")),localStorage.epposition=0,document.querySelector("#emotewrap").style.top="100px",document.querySelector("#emotewrap").style.left="-15px",localStorage.epFlTop=100,localStorage.epFlLeft=-15):(e.setAttribute("class","ep__fixed"),$("#emotespanel").insertAfter("#userlist"),localStorage.epposition=1)}function dragElement(e){var t=0,n=0,o=0,l=0;function i(e){(e=e||window.event).preventDefault(),o=e.clientX,l=e.clientY,document.onmouseup=c,document.onmousemove=a}function a(i){(i=i||window.event).preventDefault(),t=o-i.clientX,n=l-i.clientY,o=i.clientX,l=i.clientY,e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}function c(){document.onmouseup=null,document.onmousemove=null,localStorage.epFlTop=document.querySelector("#emotewrap").style.top.substring(0,document.querySelector("#emotewrap").style.top.length-2),localStorage.epFlLeft=document.querySelector("#emotewrap").style.left.substring(0,document.querySelector("#emotewrap").style.left.length-2)}document.getElementById(e.id+"header")?document.getElementById(e.id+"header").onmousedown=i:e.onmousedown=i}function autocomplete(e,t){var n,o="";function l(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function i(t){for(var n=document.getElementsByClassName("autocomplete-items"),o=0;o<n.length;o++)t!=n[o]&&t!=e&&n[o].parentNode.removeChild(n[o])}e.addEventListener("input",(function(e){var l,a,c,s=this.value;if(i(),!s)return!1;n=-1,(l=document.createElement("DIV")).setAttribute("id","autocomplete-list"),l.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(l),$("#autocomplete-list").insertBefore(document.querySelectorAll("form")[1]);var r=document.getElementById("chatline").value.match(/(?<!\S)\/\S*$/gim).toString(),m=r.substring(1,r.length);for(o=document.getElementById("chatline").value,c=0;c<t.length;c++)if(t[c].name.substr(0,r.length).toUpperCase()==r.toUpperCase())r.length,(a=document.createElement("DIV")).innerHTML="<strong>"+t[c].name.substr(0,r.length)+"</strong>",a.innerHTML+=t[c].name.substr(r.length),a.innerHTML+="<input type='hidden' value='"+t[c].name+"'>",a.innerHTML+="<img id='autocomplete-image' src='"+t[c].image+"'>",a.addEventListener("click",(function(e){$("#chatline").val($("#chatline").val().substring(0,$("#chatline").val().length-$("#chatline").val().match(/(?<!\S)\/\S*$/gim).toString().length)+this.getElementsByTagName("input")[0].value),i()})),l.appendChild(a);else if(t[c].name.substring(1,t[c].name.length).indexOf(m)>-1){var p=t[c].name.indexOf(m);(a=document.createElement("DIV")).innerHTML="<strong>/</strong>",a.innerHTML+=t[c].name.substring(1,p),a.innerHTML+="<strong>"+m+"</strong>",a.innerHTML+=t[c].name.substring(p+m.length,t[c].name.length),a.innerHTML+="<input type='hidden' value='"+t[c].name+"'>",a.innerHTML+="<img id='autocomplete-image' src='"+t[c].image+"'>",a.addEventListener("click",(function(e){$("#chatline").val($("#chatline").val().substring(0,$("#chatline").val().length-$("#chatline").val().match(/(?<!\S)\/\S*$/gim).toString().length)+this.getElementsByTagName("input")[0].value),i()})),l.appendChild(a)}})),e.addEventListener("keydown",(function(e){var t=document.getElementById("autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(e.preventDefault(),n++,l(t),document.querySelector(".autocomplete-active").scrollIntoViewIfNeeded(!1),$("#chatline").val(o.substring(0,o.length-o.match(/(?<!\S)\/\S*$/gim).toString().length)+document.getElementsByClassName("autocomplete-active")[0].querySelector("input").getAttribute("value"))):38==e.keyCode?(e.preventDefault(),n--,l(t),document.querySelector(".autocomplete-active").scrollIntoViewIfNeeded(!1),$("#chatline").val(o.substring(0,o.length-o.match(/(?<!\S)\/\S*$/gim).toString().length)+document.getElementsByClassName("autocomplete-active")[0].querySelector("input").getAttribute("value"))):13!=e.keyCode&&9!=e.keyCode||i()})),document.addEventListener("click",(function(e){i(e.target)}))}emotesPanel(),$("#emotelistbtn").remove(),emotesbtn=$('<button id="emotes-btn" class="btn btn-sm btn-default" title="Display emotes panel">Emote List</button>').prependTo("#leftcontrols").on("click",(function(){toggleDiv(emotespanel),0==localStorage.epIsOpen?localStorage.epIsOpen=1:localStorage.epIsOpen=0})),$('<li><a onclick="switchEp()" style="cursor: pointer;">Switch EP</a></li>').appendTo(".navbar-nav"),$("#newpollbtn").prependTo($("#leftcontrols")),dragElement(document.getElementById("emotewrap"));
//# sourceMappingURL=/sm/eb2fb3c08a4100aa43dec2f1e3c4ec3377dbbd475188fa77b74e42656c96ae33.map